<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='main.js'></script>
    <title>Calculate Rate</title>
    <h1>Distance Calculation </h1><br><br>
</head>

<body>
    <script>
        const params = new URLSearchParams(window.location.search);
        const origin = params.get("origin");
        const destination = params.get("destination");
        const [lat1, lon1] = origin.split(",");
        const [lat2, lon2] = destination.split(",");

        function calcDistance(lat1, lon1, lat2, lon2) {
            const earthRadiusKm = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            lat1 = lat1 * Math.PI / 180;
            lat2 = lat2 * Math.PI / 180;
            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return earthRadiusKm * c;
        }

        const distance = calcDistance(lat1, lon1, lat2, lon2);
        document.write(distance);
    //  const rate = distance * 15; // rate is 10 Rs per km
        localStorage.setItem('dis', distance);
    
        window.location.href = 'vehicle.html';    
        //document.write(`Distance Between origin  & destination  is : ${distance.toFixed(2)} km<br>`);
    </script>
     
        
    
</body>
</html>

